# ~/.bash_profile: executed by bash(1) for interactive shells.

if [ -f "/opt/openHABian-install-failed" ]; then
  echo ""
  echo -e -n "\e[31;01mAttention! \e[39;49;00m"
  echo "The openHABian setup process seems to have failed on your system."
  echo "Sorry, this shouldn't happen! Please restart the installation process. Chances"
  echo "are high setup will succeed on the second try."
  echo ""
  echo "In order to find the cause of the problem, have a look at the installation log:"
  echo -e "   \e[90;01msudo cat /boot/first-boot.log\e[39;49;00m"
  echo ""
  echo "If the error persists, please read the debug guide at:"
  echo -e "\e[94;04mhttps://github.com/openhab/openhabian/blob/master/docs/openhabian-DEBUG.md\e[39;49;00m"
  echo ""
  return 0
elif [ -f "/opt/openHABian-install-inprogress" ]; then
  echo ""
  echo -e -n "\e[36;01mAttention! \e[39;49;00m"
  echo "The openHABian setup process is not finished yet."
  if [ -f /boot/first-boot.log ]; then watch cat /boot/first-boot.log; echo -e "\nProgress log:\n"; cat /boot/first-boot.log; echo -e "\n"; fi
  echo -e "\nPlease wait for a few more minutes, all preparation steps will be finished shortly."
  return 0
fi

if [ ! -f "/usr/bin/raspi-config" ]; then
  alias raspi-config="echo 'raspi-config is not part of openHABian, please use openhabian-config instead.'"
fi

echo
FireMotD --theme Gray

OHVERSION=$(sed -n 's/openhab-distro\s*: //p' /var/lib/openhab/etc/version.properties)
OHBUILD=$(sed -n 's/build-no\s*: //p' /var/lib/openhab/etc/version.properties)

echo -e "
\e[91m                         \e[97m _   _     _     ____   _               \e[0m
\e[91m  ___   ___   ___   ___  \e[97m| | | |   / \   | __ ) (_)  ____   ___  \e[0m
\e[91m / _ \ / _ \ / _ \ / _ \ \e[97m| |_| |  / _ \  |  _ \ | | / _  \ / _ \ \e[0m
\e[91m| (_) | (_) |  __/| | | |\e[97m|  _  | / ___ \ | |_) )| || (_) || | | |\e[0m
\e[91m \___/|  __/ \___/|_| |_|\e[97m|_| |_|/_/   \_\|____/ |_| \__|_||_| | |\e[0m
\e[91m      |_|                          \e[0m$OHVERSION - $OHBUILD          \e[0m

Looking for a place to get started? Check out 'sudo openhabian-config' and the
documentation at \e[94;04mhttps://www.openhab.org/docs/installation/openhabian.html\e[36;49;00m
The openHAB dashboard can be reached at \e[94;04mhttp://$(hostname):8080\e[39;49;00m
To interact with openHAB on the command line, execute: 'openhab-cli --help'
"

# vim: filetype=sh
